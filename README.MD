ðŸš€ Host Monitor Pro

A lightweight, production-style observability stack for Windows host metrics & container logs.

<p align="center"> <b>Prometheus â€¢ Grafana â€¢ Alertmanager â€¢ Loki â€¢ Promtail â€¢ Windows Exporter</b> </p>
ðŸ“¸ Dashboard Preview
<p align="center"> <img src="./images/dashboard.png" alt="Grafana Dashboard Screenshot" width="100%"> </p>
ðŸ“š Table of Contents

Overview

Features

Architecture

Folder Structure

Requirements

Setup & Usage

Grafana Configuration

Prometheus Queries

Alerts

Logs

AWS Deployment

Completed Features

ðŸ” Overview

Host Monitor Pro provides a complete observability stack including:

Windows OS host metrics via windows_exporter

Container logs via Promtail â†’ Loki

Alerting using Prometheus â†’ Alertmanager

Visualization through Grafana

Runs seamlessly on local Windows systems and AWS EC2 Ubuntu.

ðŸš€ Features
âœ… 1. Metrics Monitoring (Prometheus)

CPU usage

Memory usage

Disk utilization

Exporter health

Configurable alerting rules

ðŸŽ¨ 2. Dashboards (Grafana)

Prebuilt Host Monitoring Dashboard

CPU / Memory / Disk usage graphs

Exporter health

Logs panel integrated with Loki

Alert visualization

ðŸ“„ 3. Log Aggregation (Loki + Promtail)

Promtail scrapes Docker logs

Loki stores logs efficiently

Grafana Explore supports:

full-text search

filtering

label queries

ðŸ”” 4. Alerts (Alertmanager)

High CPU

Low memory

High disk usage

Exporter down

Slack / Email / Webhook routing

â˜ï¸ 5. Cloud Ready

Works on AWS EC2 (t2.micro/t3.micro)

One-command deployment using Docker Compose

Supports SSH tunnels for secure access

ðŸ—ï¸ Architecture
+----------------------+
|     Windows Host     |
|  windows_exporter    |
+----------+-----------+
           |
           v
+----------------------+         +----------------+
|     Prometheus       |  --->  |  Alertmanager  |
+----------+-----------+         +----------------+
           |
           v
+----------------------+
|       Grafana        |
+----------+-----------+
           |
           v
+----------------------+
| Loki <--- Promtail   |
| (Logs Storage)       |
+----------------------+

ðŸ“‚ Folder Structure
HOST-MONITORPRO/
 â”œâ”€â”€ docker-compose.yml
 â”œâ”€â”€ prometheus.yml
 â”œâ”€â”€ prometheus_rules.yml
 â”œâ”€â”€ alertmanager.yml
 â”œâ”€â”€ loki-config.yaml
 â”œâ”€â”€ promtail-config.yml
 â”œâ”€â”€ dashboard.json
 â”œâ”€â”€ loki-data/
 â”œâ”€â”€ loki-wal/
 â””â”€â”€ README.md

ðŸ”§ Requirements
ðŸ–¥ï¸ Windows (Local)

Docker Desktop

windows_exporter installed

â˜ï¸ Ubuntu EC2 (Cloud)

Docker & Docker Compose

Open ports:

22 (SSH)

3000 (Grafana)

9090 (Prometheus)

9093 (Alertmanager)

3100 (Loki)

ðŸ³ Setup & Usage
Start the stack
sudo docker compose up -d

Check running containers
sudo docker compose ps

Stop everything
sudo docker compose down

ðŸ“Š Grafana Configuration
Default Login

URL: http://localhost:3000

Username: admin

Password: admin

Add Data Sources

Prometheus

http://prometheus:9090


Loki

http://loki:3100

Import Dashboard

Navigate: Dashboards â†’ Import

Upload: dashboard.json

Choose Prometheus datasource

ðŸ“ˆ Key Prometheus Queries
CPU Usage
100 * (1 - (
  sum by (instance) (irate(windows_cpu_time_total{mode="idle"}[5m])) /
  sum by (instance) (irate(windows_cpu_time_total[5m]))
))

Memory Usage
100 * (1 - (windows_memory_available_bytes / windows_memory_physical_total_bytes))

Disk Usage
100 * avg by (instance, volume) (
  (windows_logical_disk_size_bytes - windows_logical_disk_free_bytes) /
  windows_logical_disk_size_bytes
)

Exporter Health
up{job="windows"}

ðŸ”¥ Alerts (Prometheus â†’ Alertmanager)

Defined in: prometheus_rules.yml

Includes:

High CPU

Low memory

High disk usage

Exporter down

Reload alert rules:

curl -X POST http://localhost:9090/-/reload


View active alerts:

http://localhost:9090/alerts

ðŸ“œ Logs (Loki + Promtail)
Check Promtail output
sudo docker compose logs promtail --tail 50

Loki Queries

All logs:

{job="docker_logs"}


Errors only:

{job="docker_logs"} |= "error"

â˜ï¸ Deploying on AWS EC2
1. SSH into instance
ssh -i hostkeypair.pem ubuntu@EC2_PUBLIC_IP

2. Upload project
scp -i "hostkeypair.pem" -r F:\host-monitorpro\* ubuntu@EC2_PUBLIC_IP:/home/ubuntu/host-monitorpro/

3. Start services
cd ~/host-monitorpro
sudo docker compose up -d

4. Enable SSH tunnel (recommended)
ssh -i "hostkeypair.pem" \
-L 3000:localhost:3000 \
-L 9090:localhost:9090 \
ubuntu@EC2_PUBLIC_IP

â­ Status / Completed Features

âœ” CPU monitoring
âœ” Memory monitoring
âœ” Disk monitoring
âœ” Exporter health
âœ” Prometheus rules
âœ” Alertmanager routing
âœ” Loki log storage
âœ” Promtail container logs
âœ” Grafana dashboards
âœ” EC2 deployment
âœ” SSH tunnels
âœ” Production-ready Docker Compose

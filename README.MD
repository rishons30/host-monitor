ğŸš€ Host Monitor Pro

A lightweight, production-ready observability stack for Windows host metrics and Docker container logs using:

Prometheus â€¢ Grafana â€¢ Alertmanager â€¢ Loki â€¢ Promtail â€¢ Windows Exporter

ğŸ“¸ Dashboard Preview
<p align="center"> <img src="./images/dashboard.png" width="100%"> </p>
ğŸ” Overview

Host Monitor Pro provides:

Windows host metrics (CPU, RAM, Disk) via windows_exporter

Container logs via Promtail â†’ Loki

Alerts with Prometheus â†’ Alertmanager

Dashboards in Grafana

One-command deployment using Docker Compose

Works on Windows and AWS EC2 Ubuntu

ğŸ—ï¸ Architecture
Windows (windows_exporter)
        â†“
Prometheus â†’ Alertmanager
        â†“
Grafana
        â†“
Loki â† Promtail (Docker logs)

ğŸ“‚ Folder Structure
HOST-MONITORPRO/
 â”œâ”€â”€ docker-compose.yml
 â”œâ”€â”€ prometheus.yml
 â”œâ”€â”€ prometheus_rules.yml
 â”œâ”€â”€ alertmanager.yml
 â”œâ”€â”€ loki-config.yaml
 â”œâ”€â”€ promtail-config.yml
 â”œâ”€â”€ dashboard.json
 â”œâ”€â”€ loki-data/
 â”œâ”€â”€ loki-wal/
 â””â”€â”€ README.md

ğŸ§° Requirements
Windows

Docker Desktop

windows_exporter installed

Ubuntu (EC2)

Docker & Docker Compose installed

Open ports: 3000 (Grafana), 9090 (Prometheus), 9093, 3100

ğŸš€ Setup
Start
sudo docker compose up -d

Stop
sudo docker compose down

Check
sudo docker compose ps

ğŸ“Š Grafana Setup

Login: http://localhost:3000

admin / admin

Add datasources:

Prometheus â†’ http://prometheus:9090

Loki â†’ http://loki:3100

Import dashboard.json

ğŸ“ˆ Useful PromQL

CPU Usage

100 * (1 - sum by(instance)(irate(windows_cpu_time_total{mode="idle"}[5m])) /
          sum by(instance)(irate(windows_cpu_time_total[5m])))


Memory Usage

100 * (1 - (windows_memory_available_bytes / windows_memory_physical_total_bytes))


Disk Usage

100 *
  avg by(instance, volume)(
    (windows_logical_disk_size_bytes - windows_logical_disk_free_bytes)
    / windows_logical_disk_size_bytes
  )

ğŸ”” Alerts

Defined in prometheus_rules.yml:

High CPU

Low memory

High disk usage

Exporter down

Reload rules:

curl -X POST http://localhost:9090/-/reload

ğŸ“œ Logs (Loki + Promtail)

View Promtail logs:

sudo docker compose logs promtail --tail 50


Query logs:

{job="docker_logs"}


Errors only:

{job="docker_logs"} |= "error"

â˜ï¸ Deploy on AWS EC2
ssh -i key.pem ubuntu@EC2_IP
scp -i key.pem -r ./host-monitorpro ubuntu@EC2_IP:/home/ubuntu/
cd host-monitorpro
sudo docker compose up -d


Tunnel (recommended):

ssh -i key.pem -L 3000:localhost:3000 ubuntu@EC2_IP

âœ… Completed

âœ” CPU / Memory / Disk metrics
âœ” Alerts
âœ” Log aggregation
âœ” Docker Compose deployment
âœ” Grafana dashboards
âœ” EC2 support
